
platforms
  select $DEFAULT_PLATFORM $DEFAULT_GPU
  quit

expressions
  read -

float a[4],b[4],c[4];

print("initializing a...");
info(a);
a=ramp(0,1,0);
print("initializing b...");
b=ramp(0,10,0);
print("initializing c...");
c=ramp(10,1,0);

print("declaring testk...");

void testk(float *dest, float *src1, float *src2, float kkk)
{
	float k2;
#	int ix;	# genreates int32?
	short ix;

	k2=atan2(kkk,1);
	ix = round(kkk) << 2;
#	*dest = k2 + *src1 + kkk * (*src2+2);

	*dest = *src1 > 5 ? *src2 : 66 ;
}

end

  dump testk
  fuse testk
  info testk
#  debug resolver
  advise "Running testk..."
  run testk a b c 5.1
  advise "DONE running testk..."

  quit
Display a

exit


